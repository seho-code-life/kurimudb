<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Migrate from Version 3 | Kurimudb</title>
    <meta name="description" content="Just playing around.">
    <link rel="stylesheet" href="/assets/style.9de7d475.css">
    <link rel="modulepreload" href="/assets/Home.14835f7f.js">
    <link rel="modulepreload" href="/assets/app.197c0aa2.js">
    <link rel="modulepreload" href="/assets/en_migrations_v3.md.8da9ecdc.lean.js">
    <link rel="modulepreload" href="/assets/app.197c0aa2.js">
    <link rel="icon" href="favicon.png">
    <meta name="twitter:title" content="Migrate from Version 3 | Kurimudb">
    <meta property="og:title" content="Migrate from Version 3 | Kurimudb">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/en/" aria-label="Kurimudb, back to home" data-v-675d8756 data-v-4a583abe><!----> Kurimudb</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/akirarika/kurimudb/releases" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Changelog <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/akirarika/kurimudb" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>Languages</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/migrations/v3.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>简体中文</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/en/migrations/v3.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>English</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><!----></nav></div><!--[--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/akirarika/kurimudb/releases" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Changelog <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/akirarika/kurimudb" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><div class="item" data-v-eab3edfe><div class="nav-dropdown-link" data-v-eab3edfe data-v-56bf3a3f><button class="button" data-v-56bf3a3f><span class="button-text" data-v-56bf3a3f>Languages</span><span class="right button-arrow" data-v-56bf3a3f></span></button><ul class="dialog" data-v-56bf3a3f><!--[--><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item" href="/migrations/v3.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>简体中文</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><li class="dialog-item" data-v-56bf3a3f><div class="nav-dropdown-link-item" data-v-56bf3a3f data-v-bbc27490><a class="item active" href="/en/migrations/v3.html" data-v-bbc27490><span class="arrow" data-v-bbc27490></span><span class="text" data-v-bbc27490>English</span><span class="icon" data-v-bbc27490><!----></span></a></div></li><!--]--></ul></div></div><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">文档(English)</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/en/docs/intro/">入门(English)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/en/docs/model/">模型(English)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/en/docs/persistence/">持久化(English)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/en/docs/subscribe/">订阅变更(English)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/en/docs/typescript/">TypeScript(English)</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">驱动(English)</p><ul class="sidebar-links"><li class="sidebar-link"><p class="sidebar-link-item">浏览器驱动(English)</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/en/drivers/localstorage">LocalStorage(English)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/en/drivers/cookie">Cookie(English)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/en/drivers/dexie">Dexie (IndexedDB)(English)</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">其他驱动(English)</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/en/drivers/taro">Taro(English)</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/en/drivers/custom-driver">自定义驱动(English)</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">迁移(English)</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/en/migrations/v4">从 v4 迁移(English)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/en/migrations/v3">从 v3 迁移(English)</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#disruptive-changes">Disruptive Changes</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#model-definition">Model Definition</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#model-function">Model Function</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#model-subscription">Model Subscription</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#storage-api-class">Storage Api Class</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#new-functions-and-features">New Functions and Features</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#simplified-model-filling">Simplified Model Filling</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#auto-subscription-function">Auto Subscription Function</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#model-driver-change">Model Driver change</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#localstorage">LocalStorage</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#dexie">Dexie</a><!----></li></ul></li></ul></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="/en/bestPractices/">最佳实践(English)</a><!----></li><!--]--></ul><!--[--><!--]--></aside><!-- TODO: make this button accessible --><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="migrate-from-version-3" tabindex="-1">Migrate from Version 3 <a class="header-anchor" href="#migrate-from-version-3" aria-hidden="true">#</a></h1><p>Compared with the 3.x version, Kurimudb 4.x has many changes. They may be some new features or some incompatible changes. This document will explain the specific changes for you in detail.</p><h2 id="disruptive-changes" tabindex="-1">Disruptive Changes <a class="header-anchor" href="#disruptive-changes" aria-hidden="true">#</a></h2><h3 id="model-definition" tabindex="-1">Model Definition <a class="header-anchor" href="#model-definition" aria-hidden="true">#</a></h3><p>In the 4.x version, some default values and automatic inference were added to the definition model.</p><div class="language-js line-numbers-mode"><pre><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">ConfigState</span> <span class="token keyword">extends</span> <span class="token class-name">Models<span class="token punctuation">.</span>keyValue</span><span class="token operator">&lt;</span>
  <span class="token comment">// In version 4.x, it is no longer necessary to define the type of data, and the default is Record&lt;string | number, any&gt;</span>
  <span class="token comment">// Record&lt;string | number, any&gt;</span>
<span class="token operator">&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// In version 4.x, the model name can be omitted. Omit will use the class name of the current class.</span>
      <span class="token comment">// name: &quot;ConfigState&quot;,</span>
      <span class="token comment">// In the 4.x version, the type can be omitted. If omitted, the key-value model will be&#39;string&#39;, and the collection model will be &#39;number&#39;.</span>
      <span class="token comment">// type: &quot;string&quot;,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="model-function" tabindex="-1">Model Function <a class="header-anchor" href="#model-function" aria-hidden="true">#</a></h3><ul><li><p>The <code>yourModel.all()</code> function is changed to be available only under the collection model.</p></li><li><p>When fetching data that does not exist in the model, you will get <code>null</code> originally, but now you will get <code>undefined</code>.</p></li></ul><h3 id="model-subscription" tabindex="-1">Model Subscription <a class="header-anchor" href="#model-subscription" aria-hidden="true">#</a></h3><p>The original return value of the bulk subscription function was an array containing all the values of unsubscription. Now the return value has been changed to a function to unsubscribe all the values of this bulk subscription after execution.</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// version 3.x</span>
<span class="token keyword">const</span> unsubscribeFunctions <span class="token operator">=</span> <span class="token function">batch$</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> unsubscribe <span class="token keyword">of</span> unsubscribeFunctions<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// version 4.x</span>
<span class="token keyword">const</span> unsubscribe <span class="token operator">=</span> <span class="token function">batch$</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">unsubscribe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="storage-api-class" tabindex="-1">Storage Api Class <a class="header-anchor" href="#storage-api-class" aria-hidden="true">#</a></h3><p>The syntax of the <code>subscribeItem</code> function in the Storage Api class is now changed as follows:</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// version 3.x</span>
local<span class="token punctuation">.</span><span class="token function">subscribeItem</span><span class="token punctuation">(</span><span class="token string">&quot;say&quot;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// version 4.x</span>
local<span class="token punctuation">.</span><span class="token function">subscribeItem</span><span class="token punctuation">(</span><span class="token string">&quot;say&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="new-functions-and-features" tabindex="-1">New Functions and Features <a class="header-anchor" href="#new-functions-and-features" aria-hidden="true">#</a></h2><h3 id="simplified-model-filling" tabindex="-1">Simplified Model Filling <a class="header-anchor" href="#simplified-model-filling" aria-hidden="true">#</a></h3><p>In addition to passing in a closure, you can also pass in an object or array to fill the key-value model or collection model respectively.</p><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// key-value model:</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">seed</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">,</span>
  baz<span class="token operator">:</span> <span class="token string">&#39;qux&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Is equivalent to:</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">seed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>foo <span class="token operator">=</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>baz <span class="token operator">=</span> <span class="token string">&#39;qux&#39;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><pre><code><span class="token comment">// Collection model:</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">seed</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;bar&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Is equivalent to:</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">seed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&#39;bar&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="auto-subscription-function" tabindex="-1">Auto Subscription Function <a class="header-anchor" href="#auto-subscription-function" aria-hidden="true">#</a></h3><p>When any of the values used in the closure is changed, the closure will be executed again:</p><div class="language-js line-numbers-mode"><pre><code><span class="token function">auto$</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>configState<span class="token punctuation">.</span>data<span class="token punctuation">.</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>configState<span class="token punctuation">.</span>data<span class="token punctuation">.</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="model-driver-change" tabindex="-1">Model Driver change <a class="header-anchor" href="#model-driver-change" aria-hidden="true">#</a></h2><blockquote><p>📜 To use Kurimudb 4.x version, all driver versions need to be upgraded to 4.x as well.</p></blockquote><h3 id="localstorage" tabindex="-1">LocalStorage <a class="header-anchor" href="#localstorage" aria-hidden="true">#</a></h3><p>The LocalStorage driver now supports the use of the <code>all()</code> function.</p><h3 id="dexie" tabindex="-1">Dexie <a class="header-anchor" href="#dexie" aria-hidden="true">#</a></h3><p>The location where the <code>db</code> parameter of the Dexie driver is passed is changed from the original definition of a <strong>class member variable</strong> to the definition in the <strong>constructor</strong>.</p><div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br></div><pre><code><span class="token comment">// version 3.x</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">NoteList</span> <span class="token keyword">extends</span> <span class="token class-name">Models<span class="token punctuation">.</span>collection</span> <span class="token punctuation">{</span>
  db<span class="token operator">:</span> Dexie <span class="token operator">=</span> db<span class="token punctuation">;</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><div class="language-js line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre><code><span class="token comment">// version 4.x</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token punctuation">(</span><span class="token keyword">class</span> <span class="token class-name">NoteList</span> <span class="token keyword">extends</span> <span class="token class-name">Models<span class="token punctuation">.</span>collection</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// ...</span>
      db<span class="token operator">:</span> db<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-fb8d84c6><div class="edit" data-v-fb8d84c6><div class="edit-link" data-v-fb8d84c6 data-v-1ed99556><!----></div></div><div class="updated" data-v-fb8d84c6><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/en/migrations/v4" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>从 v4 迁移(English)</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/en/bestPractices/" data-v-38ede35f><span class="text" data-v-38ede35f>最佳实践(English)</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"bestpractices_index.md\":\"30a3b89a\",\"docs_intro_index.md\":\"352be33d\",\"docs_model_index.md\":\"fe4a996f\",\"docs_persistence_index.md\":\"1d0b6cf0\",\"docs_subscribe_index.md\":\"4f89562f\",\"docs_typescript_index.md\":\"56b725a5\",\"drivers_cookie.md\":\"ca280df5\",\"drivers_custom-driver.md\":\"39a9242c\",\"drivers_dexie.md\":\"baab3850\",\"drivers_localstorage.md\":\"79a66a96\",\"drivers_taro.md\":\"d52983d8\",\"en_docs_intro_index.md\":\"72df42ce\",\"en_docs_model_index.md\":\"8023707e\",\"en_docs_persistence_index.md\":\"4ffde3e1\",\"en_docs_subscribe_index.md\":\"ffd3688c\",\"en_docs_typescript_index.md\":\"e914166f\",\"en_drivers_cookie.md\":\"297a926e\",\"en_drivers_custom-driver.md\":\"d4177ab5\",\"en_drivers_dexie.md\":\"3a2d274b\",\"en_drivers_localstorage.md\":\"8fc1399c\",\"en_drivers_taro.md\":\"9724211b\",\"en_index.md\":\"7ae69e90\",\"en_migrations_v3.md\":\"8da9ecdc\",\"en_migrations_v4.md\":\"7a2068ae\",\"en_others_index.md\":\"9945ceee\",\"index.md\":\"95cd4f42\",\"migrations_v3.md\":\"27dad1e7\",\"migrations_v4.md\":\"75ba0549\",\"others_index.md\":\"cdf93d44\"}")</script>
    <script type="module" async src="/assets/app.197c0aa2.js"></script>
    
  </body>
</html>